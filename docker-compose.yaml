version: '3.7'
services:
    deathrun:
        image: "ceifa/gmod-server-docker"
        ports: 
            - "27017:27017"
            - "27017:27017/udp"
        volumes:
            - ./servers/_build/deathrun/addons:/server/garrysmod/addons
            - ./servers/_build/deathrun/cfg:/server/garrysmod/cfg
            - ./servers/_build/deathrun/data:/server/garrysmod/data
            - ./servers/_build/deathrun/gamemodes:/server/garrysmod/gamemodes
            - ./servers/_build/deathrun/sv.db:/server/garrysmod/sv.db
            - ./servers/_build/cache:/server/garrysmod/cache
        environment:
            - PRODUCTION
            - PORT=27017
            - NAME=[BR] Lory | Deathrun ~ 128 tickrate ~ Divirta-se!
            - ARGS=+host_workshop_collection 382793424 -tickrate 100
            - MAP=deathrun_atomic_warfare
            - GAMEMODE=deathrun
            - MAXPLAYERS=24
        restart: always
        tty: true
        build:
            context: .
            dockerfile: ./servers/deathrun/Dockerfile
        networks:
            - lory

    murder:
        image: "ceifa/gmod-server-docker"
        ports: 
            - "27018:27018"
            - "27018:27018/udp"
        volumes:
            - ./servers/_build/murder/addons:/server/garrysmod/addons
            - ./servers/_build/murder/cfg:/server/garrysmod/cfg
            - ./servers/_build/murder/data:/server/garrysmod/data
            - ./servers/_build/murder/gamemodes:/server/garrysmod/gamemodes
            - ./servers/_build/murder/sv.db:/server/garrysmod/sv.db
            - ./servers/_build/cache:/server/garrysmod/cache
        environment:
            - PRODUCTION
            - PORT=27018
            - NAME=[BR] Lory | Murder ~ [[ VIP GRATIS LIMITADO! ]] ~ Divirta-se!
            - ARGS=+host_workshop_collection 1581506103 -tickrate 100
            - MAP=gm_wwhouse
            - GAMEMODE=murder
            - MAXPLAYERS=24
        restart: always
        tty: true
        build:
            context: .
            dockerfile: ./servers/murder/Dockerfile
        networks:
            - lory

networks:
    lory: